jQuery(document).ready((function(e){const t=document.querySelectorAll(".quiz-start .item");if(0==t.length)return;const o=document.querySelector(".button.start-btn"),n=document.querySelectorAll(".coupons-hidden span"),a=document.querySelectorAll('input[name="Coupon"]');let l=[];n.length>0?n.forEach((e=>{const t=e.textContent.trim().toLowerCase(),o=e.dataset.amount;l.push({name:t,amount:o})})):a.forEach((e=>e.style.display="none"));let s=!1;t.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),o.classList.add("ready")}))}));const r=document.querySelector(".button.back"),c=document.querySelector(".button.next"),u=document.querySelectorAll(".button.subm"),i=document.querySelector(".hidden-quiz-form");let m="";let d={from:"",to:"",stop:"",date:"",time:"",email:"",phone:0,crewName:"",minCost:0,hourCost:0,couponAmount:0,summaryCost:0,itemsToMove:[],addServicesLast:[]};function p(e,t){d.quizTitle=m;const o=e.querySelector(".items-to-move");if(o){titleCheckboxes=o.querySelector(".title").textContent.trim();const e=o.querySelectorAll("input");d.itemsToMove=[],e.forEach((e=>{e.checked&&d.itemsToMove.push(e.value)}))}const n=e.querySelector(".add-services");if(n){titleCheckboxes=n.querySelector(".title").textContent.trim();const e=n.querySelectorAll("input");d.addServicesLast=[],e.forEach((e=>{e.checked&&d.addServicesLast.push(e.value)}))}const a=e.querySelector(".step-date"),r=a.querySelector('input[name="Move_date"]'),u=a.querySelector('input[type="email"]'),p=a.querySelector('select[name="Time"]'),y=a.querySelector('input[type="tel"]');d.date=r.value,d.email=u.value,d.phone=y.value,d.time=p.value,a&&a.classList.contains("active")&&(""!=r.value&&""!=u.value&&""!=p.value&&""!=y.value?c.classList.remove("disabled"):c.classList.add("disabled"));const v=e.querySelector(".step-address"),S=v.querySelector(".input.start input"),q=v.querySelector(".input.stop input"),h=v.querySelector(".input.end input");d.from=S.value,""!=q.value?d.stop="No stop point":d.stop=q.value,d.to=h.value,v&&v.classList.contains("active")&&(""!=S.value&&""!=h.value?c.classList.remove("disabled"):c.classList.add("disabled"));const f=e.querySelector(".crew");if(f){const e=f.querySelectorAll(".item");crewTitle=f.querySelector(".title").textContent.trim(),e.forEach((e=>{const t=e.querySelector(".item-top b").textContent.trim(),o=e.querySelector(".meta-price").textContent.trim(),n=e.querySelector(".item-content .row p").textContent.trim();e.classList.contains("active")&&(d.from=S.value,d.stop=q.value,d.to=h.value,d.minCost=+n,d.crewName=t,d.hourCost=+o.replace(/[^0-9.]/g,""))}))}const C=e.querySelector(".result-step");let L=null;if(C){const t=C.querySelector(".summary-from b"),o=C.querySelector(".summary-to b"),n=C.querySelector(".summary-stop b"),a=C.querySelector(".summary-date b"),r=C.querySelector(".hourly-rate p"),u=C.querySelector(".min-cost-rate p"),i=C.querySelector(".auth strong"),p=e.querySelector(".main-form"),y=p.querySelector('input[name="Full_name"]'),v=p.querySelector('input[name="Phone"]'),S=p.querySelector('input[name="Email"]'),q=p.querySelector('input[name="Date"]'),h=p.querySelector('input[name="Stop"]'),f=p.querySelector('input[name="From"]'),E=p.querySelector('input[name="To"]'),g=p.querySelector('input[name="Time"]'),b=p.querySelector('input[name="ItemsToMove"]'),x=p.querySelector('input[name="addServices"]'),$=p.querySelector('input[name="amount"]'),k=p.querySelector('input[name="Coupon"]'),w=p.querySelector('input[name="crewName"]'),A=p.querySelector('input[name="quizName"]'),M=p.querySelector('input[name="CouponAmount"]'),T=p.querySelector('input[name="fullAmount"]');C.classList.contains("active")&&0==s&&c.classList.add("disabled");const z=C.querySelector(".row .coupon-amount");for(const e of l){if(e.name==k.value.toLowerCase()){L=e,k.parentElement.classList.add("applied");break}L=null,k.parentElement.classList.remove("applied")}null!=L?(z.parentElement.style.display="flex",z.textContent=`- $${L.amount}.00`,i.textContent=`$${Math.round(d.minCost-L.amount)}.00`,d.couponAmount=L.amount,d.summaryCost=Math.round(d.minCost-L.amount),M.value=`- $${L.amount}.00`,T.value=`$${d.minCost}.00`):(z.parentElement.style.display="none",i.textContent=`$${Math.round(d.minCost)}.00`,d.couponAmount=0,d.summaryCost=Math.round(d.minCost),T.value=`$${d.minCost}.00`,M.value="No coupon applied"),A.value=m,w.value=d.crewName,d.name=y.value,$.value=d.summaryCost,t.textContent=d.from,o.textContent=d.to,""!=d.stop?(n.textContent=d.stop,n.parentElement.parentElement.style.display="flex",h.value=d.stop):(n.parentElement.parentElement.style.display="none",h.value="No stop point"),a.textContent=d.date,r.textContent=`$${d.hourCost}.00`,u.textContent=`$${d.minCost}.00`,C.classList.contains("active")?(d.phone=v.value,d.email=S.value):(v.value=d.phone,S.value=d.email),q.value=d.date,f.value=d.from,E.value=d.to,g.value=d.time,b.value=d.itemsToMove,x.value=d.addServicesLast}if(console.log(d),i){const t=i.querySelector('input[name="Full_name"]'),o=i.querySelector('input[name="E_mail"]'),n=i.querySelector('input[name="Phone_number"]'),a=i.querySelector('input[name="Moving_from"]'),l=i.querySelector('input[name="Moving_to"]'),s=i.querySelector('input[name="Move_date"]'),r=i.querySelector('textarea[name="More_detalis"]'),c=e.querySelector('input[name="consumed"]');c&&c.checked?d.consumed="true":d.consumed="false",t.value=d.name,o.value=d.email,n.value=d.phone,a.value=d.from,l.value=d.to,s.value=d.date,r.value=`\n\n      Name of Quiz: ${d.quizTitle}; \n      Stop point: ${""!=d.stop?d.stop:"No stop point"}; \n      Crew name: ${d.crewName}; \n      Cost per hour: $${d.hourCost}.00; \n      Min. cost: $${d.minCost}.00;\n      Coupon: ${null!=L?L.name+"; Amount: -$"+L.amount+".00; ":"No coupon applied; "}\n      Paid by the client: $${d.summaryCost}.00;  \n      Items to move or (WG add. services): ${d.itemsToMove}; \n      Additional Services (not WG): ${d.addServicesLast}; \n      Consent to receive SMS and email: ${d.consumed}\n      `}}e(u).on("click",(function(){const t=i.querySelector('input[type="submit"]');e(t).trigger("click")})),o.addEventListener("click",(()=>{o.classList.contains("ready")&&t.forEach(((o,n)=>{o.classList.contains("active")&&function(o){const n=t[o].querySelector("b");m=n.textContent.trim(),console.log(m);const a=document.querySelectorAll(".quiz-wrap")[o],l=document.querySelector(".quiz-start"),i=document.querySelector(".quiz-steps"),d=document.querySelector(".steps-list"),y=a.querySelectorAll(".quiz-wrap-step"),v=document.querySelector(".steps-count .all"),S=document.querySelector(".steps-count .now");function q(){const t=document.querySelectorAll(".step-price.step-date.crew.active input");t.length>0&&t.forEach((t=>{t.parentElement.classList.contains("wpcf7-not-valid")||""==t.value?e(u).addClass("disabled"):e(u).removeClass("disabled")}))}y.length>0&&(y.forEach(((e,t)=>{const o=document.createElement("span");0==t&&o.classList.add("active"),d.appendChild(o)})),v.textContent=y.length,S.textContent=1);let h=0;const f=d.querySelectorAll("span");function C(){y.forEach(((e,t)=>{t===h?e.classList.add("active"):e.classList.remove("active")})),f.forEach(((e,t)=>{t===h?e.classList.add("active"):e.classList.remove("active")})),v.textContent=y.length,S.textContent=h+1,0===h?r.addEventListener("click",(()=>{location.reload()})):r.style.display="flex",h===y.length-1?(c.style.display="none",1!=o&&3!=o||(e(u).css("display","flex"),s=!0)):(c.style.display="flex",1!=o&&3!=o||e(u).css("display","none")),p(a)}i.style.display="flex",l.style.display="none",r.addEventListener("click",(function(){if(h>0){h--,C(),c.classList.remove("disabled");var t=e("#topQuiz").offset().top-150;return e("html:not(:animated),body:not(:animated)").animate({scrollTop:t},500),!1}})),c.addEventListener("click",(function(){if(h<y.length-1){h++,C(),q();var t=e("#topQuiz").offset().top-150;return e("html:not(:animated),body:not(:animated)").animate({scrollTop:t},500),!1}})),C(),a.addEventListener("click",(e=>{p(a),q()})),a.addEventListener("change",(e=>{p(a),q()})),a.addEventListener("input",(e=>{p(a),q()})),a.querySelectorAll(".item-toggle").forEach((e=>{const t=e.querySelectorAll(".toggle");e.addEventListener("click",(e=>{let o=e.target;t.forEach((e=>e.classList.remove("active"))),o.closest(".toggle")&&o.closest(".toggle").classList.add("active")}))}));const L=a.querySelector(".question.terms .qanswer");L&&L.addEventListener("click",(()=>{L.parentElement.classList.contains("checked")?(L.parentElement.classList.remove("checked"),c.classList.add("disabled")):(L.parentElement.classList.add("checked"),c.classList.remove("disabled"))}))}(n)}))})),e(".wpcf7").on("wpcf7mailsent",(function(t){"3580"==t.detail.contactFormId&&(e(".success").fadeIn(200),setTimeout((()=>{const t=i.querySelector('input[type="submit"]');e(t).trigger("click")}),2e3)),localStorage.getItem("url")&&localStorage.removeItem("url")})),e(".time.select").on("click",(function(){e(this).children("span").children("select").trigger("mousedown")})),e(".input.stop .icon").on("click",(function(){e(this).parent().hasClass("noadded")?e(this).parent().removeClass("noadded"):(e(this).parent().addClass("noadded"),e(this).parent().removeClass("listen"),e(this).next("input").val(""))}))}));