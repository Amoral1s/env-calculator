jQuery(document).ready((function(e){const t=document.querySelectorAll(".quiz-start .item");if(0==t.length)return;const o=document.querySelector(".button.start-btn"),n=document.querySelectorAll(".coupons-hidden span"),a=document.querySelectorAll('input[name="Coupon"]');let l=[];n.length>0?n.forEach((e=>{const t=e.textContent.trim().toLowerCase(),o=e.dataset.amount;l.push({name:t,amount:o})})):a.forEach((e=>e.style.display="none"));let s=!1;t.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),o.classList.add("ready")}))}));const r=document.querySelector(".button.back"),c=document.querySelector(".button.next"),i=document.querySelectorAll(".button.subm"),u=document.querySelector(".hidden-quiz-form");let m="";let d={from:"",to:"",stop:"",date:"",time:"",email:"",phone:0,crewName:"",minCost:0,hourCost:0,couponAmount:0,summaryCost:0,itemsToMove:[],addServicesLast:[]};function p(e){d.quizTitle=m;const t=e.querySelector(".items-to-move");if(t){titleCheckboxes=t.querySelector(".title").textContent.trim();const e=t.querySelectorAll("input");d.itemsToMove=[],e.forEach((e=>{e.checked&&d.itemsToMove.push(e.value)}))}const o=e.querySelector(".add-services");if(o){titleCheckboxes=o.querySelector(".title").textContent.trim();const e=o.querySelectorAll("input");d.addServicesLast=[],e.forEach((e=>{e.checked&&d.addServicesLast.push(e.value)}))}const n=e.querySelector(".step-date"),a=n.querySelector('input[name="Move_date"]'),r=n.querySelector('input[type="email"]'),i=n.querySelector('select[name="Time"]'),p=n.querySelector('input[type="tel"]');d.date=a.value,d.email=r.value,d.phone=p.value,d.time=i.value,n&&n.classList.contains("active")&&(""!=a.value&&""!=r.value&&""!=i.value&&""!=p.value?c.classList.remove("disabled"):c.classList.add("disabled"));const y=e.querySelector(".step-address"),v=y.querySelector(".input.start input"),S=y.querySelector(".input.stop input"),q=y.querySelector(".input.end input");d.from=v.value,""!=S.value?d.stop="No stop point":d.stop=S.value,d.to=q.value,y&&y.classList.contains("active")&&(""!=v.value&&""!=q.value?c.classList.remove("disabled"):c.classList.add("disabled"));const h=e.querySelector(".crew");if(h){const e=h.querySelectorAll(".item");crewTitle=h.querySelector(".title").textContent.trim(),e.forEach((e=>{const t=e.querySelector(".item-top b").textContent.trim(),o=e.querySelector(".meta-price").textContent.trim(),n=e.querySelector(".item-content .row p").textContent.trim();e.classList.contains("active")&&(d.from=v.value,d.stop=S.value,d.to=q.value,d.minCost=+n,d.crewName=t,d.hourCost=+o.replace(/[^0-9.]/g,""))}))}const f=e.querySelector(".result-step");let C=null;if(f){const t=f.querySelector(".summary-from b"),o=f.querySelector(".summary-to b"),n=f.querySelector(".summary-stop b"),a=f.querySelector(".summary-date b"),r=f.querySelector(".hourly-rate p"),i=f.querySelector(".min-cost-rate p"),u=f.querySelector(".auth strong"),p=e.querySelector(".main-form"),y=p.querySelector('input[name="Full_name"]'),v=p.querySelector('input[name="Phone"]'),S=p.querySelector('input[name="Email"]'),q=p.querySelector('input[name="Date"]'),h=p.querySelector('input[name="Stop"]'),L=p.querySelector('input[name="From"]'),E=p.querySelector('input[name="To"]'),g=p.querySelector('input[name="Time"]'),b=p.querySelector('input[name="ItemsToMove"]'),x=p.querySelector('input[name="addServices"]'),$=p.querySelector('input[name="amount"]'),k=p.querySelector('input[name="Coupon"]'),w=p.querySelector('input[name="crewName"]'),A=p.querySelector('input[name="quizName"]'),M=p.querySelector('input[name="CouponAmount"]'),T=p.querySelector('input[name="fullAmount"]');f.classList.contains("active")&&0==s&&c.classList.add("disabled");const z=f.querySelector(".row .coupon-amount");for(const e of l){if(e.name==k.value.toLowerCase()){C=e,k.parentElement.classList.add("applied");break}C=null,k.parentElement.classList.remove("applied")}null!=C?(z.parentElement.style.display="flex",z.textContent=`- $${C.amount}.00`,u.textContent=`$${Math.round(d.minCost-C.amount)}.00`,d.couponAmount=C.amount,d.summaryCost=Math.round(d.minCost-C.amount),M.value=`- $${C.amount}.00`,T.value=`$${d.minCost}.00`):(z.parentElement.style.display="none",u.textContent=`$${Math.round(d.minCost)}.00`,d.couponAmount=0,d.summaryCost=Math.round(d.minCost),T.value=`$${d.minCost}.00`,M.value="No coupon applied"),A.value=m,w.value=d.crewName,d.name=y.value,$.value=d.summaryCost,t.textContent=d.from,o.textContent=d.to,""!=d.stop?(n.textContent=d.stop,n.parentElement.parentElement.style.display="flex",h.value=d.stop):(n.parentElement.parentElement.style.display="none",h.value="No stop point"),a.textContent=d.date,r.textContent=`$${d.hourCost}.00`,i.textContent=`$${d.minCost}.00`,f.classList.contains("active")?(d.phone=v.value,d.email=S.value):(v.value=d.phone,S.value=d.email),q.value=d.date,L.value=d.from,E.value=d.to,g.value=d.time,b.value=d.itemsToMove,x.value=d.addServicesLast}if(console.log(d),u){const t=e.querySelector('input[name="Name_date"]');t&&""!=t.value&&(d.name=t.value),console.log(t.closest(".input")),"White Glove Moving Service with Complimentary Onsite Visit"!=d.quizTitle&&"Long Distance and Moves to Canada"!=d.quizTitle||t&&(t.closest(".input").style.display="block");const o=u.querySelector('input[name="Full_name"]'),n=u.querySelector('input[name="E_mail"]'),a=u.querySelector('input[name="Phone_number"]'),l=u.querySelector('input[name="Moving_from"]'),s=u.querySelector('input[name="Moving_to"]'),r=u.querySelector('input[name="Move_date"]'),c=u.querySelector('textarea[name="More_detalis"]'),i=e.querySelector('input[name="consumed"]');i&&i.checked?d.consumed="true":d.consumed="false",o.value=d.name,n.value=d.email,a.value=d.phone,l.value=d.from,s.value=d.to,r.value=d.date,c.value=`\n\n      Name of Quiz: ${d.quizTitle}; \n      Move time: ${d.time}; \n      Stop point: ${""!=d.stop?d.stop:"No stop point"}; \n      Crew name: ${d.crewName}; \n      Cost per hour: $${d.hourCost}.00; \n      Min. cost: $${d.minCost}.00;\n      Coupon: ${null!=C?C.name+"; Amount: -$"+C.amount+".00; ":"No coupon applied; "}\n      Paid by the client: $${d.summaryCost}.00;  \n      Items to move or (WG add. services): ${d.itemsToMove}; \n      Additional Services (not WG): ${d.addServicesLast}; \n      Consent to receive SMS and email: ${d.consumed}\n      `}}e(i).on("click",(function(){const t=u.querySelector('input[type="submit"]');e(t).trigger("click")})),o.addEventListener("click",(()=>{o.classList.contains("ready")&&t.forEach(((o,n)=>{o.classList.contains("active")&&function(o){const n=t[o].querySelector("b");m=n.textContent.trim(),console.log(m);const a=document.querySelectorAll(".quiz-wrap")[o],l=document.querySelector(".quiz-start"),u=document.querySelector(".quiz-steps"),d=document.querySelector(".steps-list"),y=a.querySelectorAll(".quiz-wrap-step"),v=document.querySelector(".steps-count .all"),S=document.querySelector(".steps-count .now");function q(){const t=document.querySelectorAll(".step-price.step-date.crew.active input");t.length>0&&t.forEach((t=>{"Name_date"!=t.name&&(t.parentElement.classList.contains("wpcf7-not-valid")||""==t.value?e(i).addClass("disabled"):e(i).removeClass("disabled"))}))}y.length>0&&(y.forEach(((e,t)=>{const o=document.createElement("span");0==t&&o.classList.add("active"),d.appendChild(o)})),v.textContent=y.length,S.textContent=1);let h=0;const f=d.querySelectorAll("span");function C(){y.forEach(((e,t)=>{t===h?e.classList.add("active"):e.classList.remove("active")})),f.forEach(((e,t)=>{t===h?e.classList.add("active"):e.classList.remove("active")})),v.textContent=y.length,S.textContent=h+1,0===h?r.addEventListener("click",(()=>{location.reload()})):r.style.display="flex",h===y.length-1?(c.style.display="none",1!=o&&3!=o||(e(i).css("display","flex"),s=!0)):(c.style.display="flex",1!=o&&3!=o||e(i).css("display","none")),p(a)}u.style.display="flex",l.style.display="none",r.addEventListener("click",(function(){if(h>0){h--,C(),c.classList.remove("disabled");var t=e("#topQuiz").offset().top-150;return e("html:not(:animated),body:not(:animated)").animate({scrollTop:t},500),!1}})),c.addEventListener("click",(function(){if(h<y.length-1){h++,C(),q();var t=e("#topQuiz").offset().top-150;return e("html:not(:animated),body:not(:animated)").animate({scrollTop:t},500),!1}})),C(),a.addEventListener("click",(e=>{p(a),q()})),a.addEventListener("change",(e=>{p(a),q()})),a.addEventListener("input",(e=>{p(a),q()})),a.querySelectorAll(".item-toggle").forEach((e=>{const t=e.querySelectorAll(".toggle");e.addEventListener("click",(e=>{let o=e.target;t.forEach((e=>e.classList.remove("active"))),o.closest(".toggle")&&o.closest(".toggle").classList.add("active")}))}));const L=a.querySelector(".question.terms .qanswer");L&&L.addEventListener("click",(()=>{L.parentElement.classList.contains("checked")?(L.parentElement.classList.remove("checked"),c.classList.add("disabled")):(L.parentElement.classList.add("checked"),c.classList.remove("disabled"))}))}(n)}))})),e(".wpcf7").on("wpcf7mailsent",(function(t){"3580"==t.detail.contactFormId&&(e(".success").fadeIn(200),setTimeout((()=>{const t=u.querySelector('input[type="submit"]');e(t).trigger("click")}),2e3)),localStorage.getItem("url")&&localStorage.removeItem("url")})),e(".time.select").on("click",(function(){e(this).children("span").children("select").trigger("mousedown")})),e(".input.stop .icon").on("click",(function(){e(this).parent().hasClass("noadded")?e(this).parent().removeClass("noadded"):(e(this).parent().addClass("noadded"),e(this).parent().removeClass("listen"),e(this).next("input").val(""))}))}));