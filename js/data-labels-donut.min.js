!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],t):e.DoughnutLabel=t(e.Chart.helpers,e.Chart)}(this,(function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var i={font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},paddingPercentage:10,display:!0,api:"beforeDatasetDraw",color:"#000000"},n={parseFont:function(i){var o=t.defaults,r=e.valueOrDefault(i.size,o.font.size),l={family:e.valueOrDefault(i.family,o.font.family),lineHeight:e.toLineHeight(i.lineHeight,r),size:r,style:e.valueOrDefault(i.style,o.font.style),weight:e.valueOrDefault(i.weight,null),string:""};return l.string=n.toFontString(l),l},toFontString:function(t){if(!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family))return null;if(!new RegExp("^[0-9]+$").test(t.size)&&"number"!=typeof t.size)throw"Invalid font size value! Only pixels allowed!";return(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(e,t){var i,n=[].concat(t),o=n.length,r=e.font,l=0,a=0;for(i=0;i<o;++i)e.font=n[i].font.string,l=Math.max(e.measureText(n[i].text).width,l),a+=n[i].font.lineHeight;return e.font=r,{height:a,width:l}}};return{id:"doughnutlabel",beforeInit:function(t,n,o){var r=t.ctx;this[e.resolve([o.api,i.api],r,0)]=this._drawLabels},_drawLabels:function(t,o,r){if(r&&r.labels&&r.labels.length>0){var l=t.ctx,a=[];r.labels.forEach((o=>{if((t=>e.resolve([t.display,r.display,i.display],l,0))(o)){var f={text:"function"==typeof o.text?o.text(t):o.text,font:n.parseFont(e.resolve([o.font,r.font,i.font],l,0)),color:e.resolve([o.color,r.color,i.color],l,0)};a.push(f)}}));var f=n.textSize(l,a),s=1-e.resolve([r.paddingPercentage,i.paddingPercentage],l,0)/100,h=Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2)),u=2*o.meta.controller.innerRadius/h*s;u<1&&(a.forEach((function(e){e.font.size=Math.floor(e.font.size*u),e.font.lineHeight=void 0,e.font=n.parseFont(e.font)})),f=n.textSize(l,a)),l.textAlign="center",l.textBaseline="middle";var d,c=(t.chartArea.left+t.chartArea.right)/2,g=(t.chartArea.top+t.chartArea.bottom)/2-f.height/2,p=a.length,v=0;for(d=0;d<p;++d){l.fillStyle=a[d].color,l.font=a[d].font.string;var y=g+a[d].font.lineHeight/2+v;v+=a[d].font.lineHeight,l.fillText(a[d].text,c,y)}}}}}));